<!DOCTYPE html>
<html lang="en" data-wf-page="6607e93606f6bdfff24355e2" data-wf-site="6606de22e8c152e6b19be98a">
<head>
  <meta charset="utf-8">
  <title>Register</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/healthdashboard.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["PT Sans:400,400italic,700,700italic","Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  <meta name="csrf-token" content="your-csrf-token-here">
  <script src="https://unpkg.com/@apollo/client@3.7.14/dist/apollo-client.js"></script>
  <script src="https://unpkg.com/graphql-tag@2.12.6/lib/index.js"></script>
</head>
<body class="body-2">
  <a href="index.html" class="link-block-8 w-inline-block" aria-label="Home">
    <img src="images/logo2_1.png" loading="lazy" sizes="200px" srcset="images/logo2_1-p-500.png 500w, images/logo2_1.png 681w" alt="Company Logo">
  </a>
  <div class="w-users-userformpagewrap sign-up-wrapper">
    <div class="sign-up-block">
      <div class="w-users-usersignupformwrapper sign-up-form-block-2">
        <div tabindex="-1" class="w-users-userformsuccessstate w-form-success">
          <div class="w-users-userformheader"><img src="https://d3e54v103j8qbb.cloudfront.net/img/thumbs-up-72.cbcaec93bc.svg" loading="lazy" alt="">
            <h2>Account activated</h2>
          </div>
          <p>Your account was created successfully. You will be redirected shortly.</p>
          <div data-wf-user-form-redirect="">
            <a href="index.html" class="w-inline-block">If nothing happens, click here.</a>
          </div>
        </div>
        <a href="index.html" class="w-inline-block"><img src="images/logo2.png" loading="lazy" sizes="200px" srcset="images/logo2-p-500.png 500w, images/logo2.png 681w" alt="" class="image-8"></a>
        <div class="w-users-userformpagewrap log-in-wrapper">
          <div class="sign-in-block">
            <h2 class="heading-5">Sign Up</h2>
            <div class="form-wrap">
              <div class="w-form">
                <form id="register-form" class="log-in-form">
                  <div class="field-block">
                    <label for="fname" class="field-label-2">First name</label>
                    <input class="form-field w-input" maxlength="50" name="fname" type="text" id="fname" required>
                  </div>
                  <div class="field-block">
                    <label for="lname" class="field-label-2">Last name</label>
                    <input class="form-field w-input" maxlength="50" name="lname" type="text" id="lname" required>
                  </div>
                  <div class="field-block">
                    <label for="email" class="field-label-2">Email</label>
                    <input class="form-field w-input" maxlength="100" name="email" type="email" id="email" required>
                  </div>
                  <div class="field-block">
                    <label for="uname" class="field-label-2">Username</label>
                    <input class="form-field w-input" maxlength="100" name="uname" type="text" id="uname" required>
                  </div>
                  <div class="field-block">
                    <label for="pw" class="field-label-2">Password<span class="text-red"></span></label>
                    <div class="password-wrap">
                      <input class="form-field w-input" maxlength="256" name="pw" type="password" id="pw" required>
                      <img id="eye-open" alt="" src="images/eye-open.svg" loading="lazy" class="eye-open">
                      <img id="eye-close" alt="" src="images/eye-close.svg" loading="lazy" class="eye-close">
                    </div>
                  </div>
                  <div class="field-block">
                    <label for="pw2" class="field-label-2">Confirm Password<span class="text-red"></span></label>
                    <div class="password-wrap">
                      <input class="form-field w-input" maxlength="256" name="pw2" type="password" id="pw2" required>
                      <img id="eye-open" alt="" src="images/eye-open.svg" loading="lazy" class="eye-open">
                      <img id="eye-close" alt="" src="images/eye-close.svg" loading="lazy" class="eye-close">
                    </div>
                  </div>
                  <button type="submit" class="submit w-button" value="Sign In">Sign Up</button>
                  <a data-ms-auth-provider="google" href="#" class="button-7 w-inline-block"><img loading="lazy" src="images/google.svg" alt="">
                    <p class="paragraph-7">Sign Up With Google</p>
                  </a>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form.</div>
                </div>
              </div>
            </div>
            <div class="form-bottom">
              <p class="paragraph-5">By clicking the button above, you agree to our <a href="#" class="link-4">terms of use</a> and <a href="#" class="link-4">privacy policies</a>
              </p>
            </div>
          </div>
        </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6606de22e8c152e6b19be98a" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  <script> // connect passport local strategy
    document.getElementById('register-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      const fname = document.getElementById('fname').value;
      const lname = document.getElementById('lname').value;
      const email = document.getElementById('email').value;
      const username = document.getElementById('uname').value;
      const password = document.getElementById('pw').value;
      const confirmPassword = document.getElementById('pw2').value;

      try {
        const response = await fetch('/register', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ fname, lname, email, uname, pw, pw2 }),
        });

        const data = await response.json();

        if (response.ok) {
          // Store the token in localStorage
          localStorage.setItem('token', data.token);
          // Redirect to the dashboard or home page
          window.location.href = '/index.html';
        } else {
          alert(data.message || 'Registration failed. Please try again.');
        }
      } catch (error) {
        console.error('Error:', error);
        alert('An error occurred. Please try again.');
      }
    });
  </script>
</body>
</html>
